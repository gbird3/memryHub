{% extends "base.html" %}

{% load static %}

{% block title %}MemryHub{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href={% static "timeline/css/timeline.css" %}>
<link rel="stylesheet" type="text/css" href={% static "home/css/font-awesome/css/font-awesome.min.css" %}>
{% endblock %}

{% block content %}
<div>
	<div class="container-fluid">
		<div class = "row top-buffer-first text-center">
			<div class = "col-lg 12">
				<h1>{{ user.first_name }}'s Timelines</h1>
        <button type="button" class="btn" id = "btn-new-timeline" data-toggle="modal" data-target="#addTimeline">Create New Timeline</button>
			</div>
		</div>
		<div class="row top-buffer bottom-buffer side-buffer">

			{% if timeline_count == 0 %}
				<div class = "col-lg-12 center-block">
					<div id = "timeline-tutorial" class = " card-outline-info center-block text-center">
							<i class="fa fa-arrow-up fa-4x"></i>
							<h4>Use the "Create New Timeline" button to create your first timeline.</h4>
					</div>
				</div>
			{% endif %}

			{% for timeline in timelines %}
			<div class = "col-lg-4 center-block btn-block">
				<a href = "{% url 'view' timeline.id %}">
					<div class="card top-buffer card-outline-info bottom-buffer" style="width: 100%;">
	          {% if timeline.image %}
	          <img class="card-img-top img-fluid" src="https://drive.google.com/uc?export=view&id={{ timeline.image }}" alt="Timeline card image">
						{% else %}
	          <img class="card-img-top img-fluid" src= {% static "/timeline/media/default-profile.png" %} alt="Timeline card image">
	          {% endif %}
						<hr/>
	  				<div class="card-block text-card-block">
	    				<h4 class="card-title">{{ timeline.name }}</h4>
	    				<p class="card-text">{{ timeline.description }}</p>
							<!--hiding buttons on timeline page
							<a href="{% url 'view' timeline.id %}" class="btn btn-info bottom-buffer">View Timeline</a>
	            <a href="{% url 'edit_timeline' timeline.id %}" class="btn btn-info bottom-buffer">Edit Timeline</a>
						</br>
	            <a href="" class="btn btn-danger bottom-buffer" data-toggle="modal" data-target="#confirm-delete-{{ timeline.id }}">Delete Timeline</a>
						-->
						</div>
					</div>
				</a>
			</div>

			<!-- Modal for delete -->
        <div class="modal fade" id="confirm-delete-{{ timeline.id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="modal-header">
                      <h2 >Confirm delete?</h2>
                  </div>
                  <div class="modal-body">
                      <p>Are you sure you wish to delete this timeline?</p>
                      <p style = "font-style: italic">Note: This will not delete the folder in your Google Drive folder. This will only make the folder inactive on this website. You will still have access to the folder through your Google Drive.</p>
                  </div>
                  <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                      <a href = "{% url 'delete' timeline.id %}" class="btn btn-danger btn-ok">Confirm Delete</a>
                  </div>
              </div>
          </div>
        </div>
      {% endfor %}
  	</div>
	</div>
</div>


<!--  Modal for adding Timeline -->

  <div class="modal fade" id="addTimeline" tabindex="-1" role="dialog" aria-labelledby="Label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">New Timeline</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div hidden id="required-alert" class="alert alert-danger" role="alert">
            Name is a required input.
          </div>
          <form>
            {% csrf_token %}
            <div class="form-group">
              <label for="timeline_name" class="form-control-label">Timeline Name:</label>
              <input type="text" class="form-control" required id="timeline_name">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" onClick="createTimeline('timeline')" class="btn btn-primary">Add</button>
          <button type="button" onClick="createTimeline('files')" class="btn btn-primary">Add Picture</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block js %}
  <script src = {% static "timeline/js/timeline.js" %}></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/tether/1.4.3/js/tether.min.js"></script>
{% endblock %}
